id: 80
replyTo: 0
name: Jimmy
email: F0D6E096FD45271B1A8CE970F035B72B
body: "Via my approach, receiving with the RTL-SDR, I have managed to read about all bits and bytes from both the original RFT and the Arduino/cc1101 now.\nI have been able to get the ID from my RFT and changed the Arduino code to use that same ID. When I then compare both, they do have the same bits and bytes.  But still the itho fan does not respond to the arduino. So I searched for other differences.\n\nFor now I only focus on the \"low\" command.\n\n1) As to be expected, there are differences at the points of the counters.\nFor instance: Halfway the const byte itho_RFT_message, the code reads:\n	154, 86, //fixed value\n	0, 0, 0,  // counter + commands\nSome hard to follow function setCounter1Bytes shuffles bits in 0,0,0.\nMy RFT sends 85, 166, 102.  The arduino sent 85, 153, 102. But because these are part of a Counter, I think it is logical that they differ?\n\nAnother Counter:\nThe code says: const byte itho_RFT_low_command[] =    { 38, 89, 150, 170, 165, 101, 90, 150, 85, 149, 101, 89, 150,  85, 150,  6};\nThen the code shuffles the last byte (6):\n// correct the bit position of the last command byte\nresult[41] <<= 4; \nThen it adds a counter that shuffles that byte again:\nsetCounter2Bytes(counter2, &result[41], &result[42], &result[43]);\nAnd then the footer is added: const byte itho_RFT_regular_footer[] = { 2, 172, 170, 170, 170, 170, 170, 7};\nThe RFT differs here in 3 bytes, starting from result[41], which I think is also because of the counters.\n\nThen I discovered that my RFT sends a different itho_RF_low_command, so I changed it:\nconst byte itho_RF_low_command[] =    { 1,  84, 213, 85,  83,  51,  84};  // Last 2 bytes from my RFT are different\n\nSo looking after fixing the itho_RF_low_command, the only difference between the RFT and the Arduino is around the counters.\nBecause it still does not work, I'm afraid it has to do with the counters, that are not \"in sync\" between the RFT and the Arduino. Am I possibly right?"
date: 2016-04-17T18:40:21.0000000+02:00
