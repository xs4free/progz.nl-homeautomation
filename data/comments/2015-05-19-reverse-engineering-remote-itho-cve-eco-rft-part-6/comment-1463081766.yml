id: 105
replyTo: 104
name: JFdB
email: BD446D44408677D08C5A5F907D71B8EE
body: "The code hangs on the following statement if a packet longer than 61 bytes is send:\nwhile ((readRegisterWithSyncProblem(CC1101_MARCSTATE, CC1101_STATUS_REGISTER) & CC1101_BITS_MARCSTATE) != CC1101_MARCSTATE_IDLE);\n\nThis line is in the routine CC1101.cpp\nThe loop with\n	//continue sending when packet is bigger than 64 bytes\nfinishes\n	//continue sending when packet is bigger than 64 bytes\n	if (packet->length > CC1101_DATA_LEN)\n	{\n		index += length;\n		\n		//loop until all bytes are transmitted\n		while (index length)\n		{\n			//check if there is free space in the fifo\n      debug.serOut(\"before checking free space in fifo n\");\n			while ((txStatus = (readRegisterWithSyncProblem(CC1101_TXBYTES, CC1101_STATUS_REGISTER) & CC1101_BITS_RX_BYTES_IN_FIFO)) > (CC1101_DATA_LEN - 2));\n			debug.serOut(\"after checking free space in fifo n\");\n      \n			//calculate how many bytes we can send\n			length = (CC1101_DATA_LEN - txStatus);\n			length = ((packet->length - index) length - index) : length);\n      debug.serOutInt(length);\n      debug.serOut(\" bytes can be sendn\");\n			\n			//send some more bytes\n			for (int i=0; idata[index+i]);\n			\n			index += length;			\n		}\n    return;\n	}\n  debug.serOut(\"wait until transmission is finished n\");\n	//wait until transmission is finished (TXOFF_MODE is expected to be set to 0/IDLE)\n	while ((readRegisterWithSyncProblem(CC1101_MARCSTATE, CC1101_STATUS_REGISTER) & CC1101_BITS_MARCSTATE) != CC1101_MARCSTATE_IDLE);	\n  debug.serOut(\"Transmission is finished n\");"
date: 2016-05-12T21:36:06.0000000+02:00
