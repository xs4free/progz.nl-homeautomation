id: 51
replyTo: 46
name: Jimmy
email: F0D6E096FD45271B1A8CE970F035B72B
body: >-
  Not all values become set as they are defined... So I think I found some reason why things do not work...


  I added printRegisters(); to the sendCommand function, just before the cc1150.sendSerialData(..);

  Now I can see all settings just before the transmission is done.  Most of them seem to be correct, like the FREQx values etc.

  But taking a closer look, I notice that CC1150_MDMCFG4 = A, which is nowhere defined with that value.

  Same for FSCAL and the TEST values, also different from what is defined.

  CC1150_FSCAL3 = AC

  CC1150_FSCAL2 = D

  CC1150_FSCAL1 = 38

  CC1150_FSCAL0 = 11


  When I remove this line, it works better:  cc1150.writeRegister(CC1150_MCSM0, ITHO_MCSM0); //0x18 0x18

  (I also removed the line that I wanted to test with MCSM1 on the C1101)


  I looked at SmartRF and the desired settings for MCSM0, I think the value must not be 0x18 but 0x28.

  I changed MCSM0 to 0x28 and re-added the line to set it.

  Now the FSCAL is set correctly:

  CC1150_FSCAL3 = A9

  CC1150_FSCAL2 = 2A

  CC1150_FSCAL1 = 0

  CC1150_FSCAL0 = 11


  But still CC1150_MDMCFG4 = A

  MDMCFG4 is set at different points with different values (none is 0x0A), the last one should set it to ITHO_RFT2_MDMCFG4.

  And that should be ITHO_RFT2_MDMCFG4 0x5A

  Strange because SmartRF says that only the lowest 4 bits [3:0] can be set, the higher bits [7:4] are reserved!

  I do not know what it should be, perhaps 0x0A instead of 0x5A?


  Why are the TEST values incorrect?

  I noticed that the description for the FSTEST register in SmartRF says: For test only. Do not write to this register.

  Perhaps it is wrong to write?

  What about the other TEST values? The PDF refers to values given by SmartRF and SmartRF says do not write.


  But... Stil no response to the joinItho()...

  Please help?
date: 2016-03-08T19:42:09.0000000+01:00
