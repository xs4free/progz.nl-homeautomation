id: 107
replyTo: 0
name: Rogier Reedijk
email: 7F2A9FD369018735070D34C0331FE9C5
body: "JFDB,\nI've juist trad through the datasheet and on page 56, chapter 20 called \"Data FIFO\", there is a table that specifies when a buffer under flow will occur. You are right that it's related to the message being bigger than 64 bytes. Looking at the code Klusjesman has written, the initSendMessage2 method should be changed, because it sets the PKT_LENGTH to an invalid value (cannot be higher than 64 bytes). Also in the SendData method there should be a register write that sets the FIFO_THR to the remain bytes (most likely 72 - 64 = 8) to prevent the buffer under flow message. \nIf I read the datasheet correctly, in the current implementation the last 8 bytes won't be transferred because of the buffer under flow (ea the buffer isn't filled to the fixed packet length value, and thus cannot start transmitting).\n\nSadly I still haven't had the time to test out the code Klusjesman wrote, but with these changes it should work. When I find the time I will try to update my GitHub repo and also submit a Pull Request to Klusjesman's repo to address this problem. If anyone has more time to do this, feel free to post the necessary changes on this form or sent them to me or Klusjesman!"
date: 2016-05-13T07:06:11.0000000+02:00
